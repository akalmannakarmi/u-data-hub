{% set page = "panel" %}
{% extends '0Base.html' %} 
{% block title %} FAQ {% endblock %} 
{% block body %}
<main>
	<div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <nav class="col-md-2 d-none d-md-block sidebar py-4">
        <h4 class="sidebar-sticky">
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link active" href="./panel.php">
                <i class="fas fa-home"></i>
                Dashboard
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./categories.php">
                <i class="fas fa-cog"></i>
                Categories
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./charts.php">
                <i class="fas fa-chart-bar"></i>
                Charts
              </a>
            </li>
          </ul>
        </h4>
      </nav>

      <!-- Main content -->
      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">Dashboard</h1>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Number of Users</h5>
                <p class="card-text">{{noOfUsers}}</p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Number of Records</h5>
                <p class="card-text">{{noOfData}}</p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>
</main>
    <div class="container m-2">
        {% for category,fieldValue in categoriesAndFields.items() %}
        <div class="row">
            <h3 class="my-3">
                <form action="./admin/editCategory" method="post" class="d-inline">
                    <input type="text" name="category" value="{{category}}">
                    <button type="submit" name="oldCategory" value="{{category}}">Update</button>
                </form>
                <form action="./admin/removeCategory" method="post" class="d-inline"><button name="category" value="{{category}}">Del</button></form>
            </h3>
            {% for field, (fieldId,defaultPrivacy) in fieldValue.items() %}
            <h4>
                <form action="./admin/editField/{{fieldId}}" method="post" class="d-inline">
                    <input type="text" name="field" value="{{field}}">
                    <label>dataType</label>
                    <select name="dataType">
                        {% for id,type in dataTypes.items()%}
                        <option value="{{id}}" {% if id==revCategortyAndField[fieldId][2] %} selected {% endif %} >{{type}}</option>
                        {% endfor %}
                    </select>
                    <input type="radio" name="privacy" value="0" {% if defaultPrivacy == 0 %} checked {% endif %}> Public
                    <input type="radio" name="privacy" value="1" {% if defaultPrivacy == 1 %} checked {% endif %}> Private
                    <input type="radio" name="privacy" value="2" {% if defaultPrivacy == 2 %} checked {% endif %}> Anonymous
                    <button type="submit">update</button>
                </form>
                <a href="./admin/removeField/{{fieldId}}"><button>Del</button></a>
            </h4>
            {% endfor %}
            <form action="./admin/addField" method="post">
                <h4>
                    <input type="text" name="field">
                    <label for="newField-{{category}}">dataType</label>
                    <select name="dataType" id="newField-{{category}}">
                        {% for id,type in dataTypes.items()%}
                        <option value="{{id}}">{{type}}</option>
                        {% endfor %}
                    </select>
                    <input type="radio" name="privacy" value="0"> Public
                    <input type="radio" name="privacy" value="1"> Private
                    <input type="radio" name="privacy" value="2"> Anonymous
                    <button type="submit" name="category" value="{{category}}">Add</button>
                </h4>
            </form>
        </div>
        {% endfor %}

        <h3>
            <form action="./admin/addCategory" method="post">
                <input type="text" name="category">
                <button type="submit">Add</button>
            </form>
        </h3>
    </div>
</div>
{% endblock %} 